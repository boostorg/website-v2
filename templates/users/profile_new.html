{% extends "users/profile_base_new.html" %}

{% load static i18n %}

{% block content %}
<div class="container">
  <div class="mt-6">
    <img class="w-32 h-32 rounded-full md:h-auto" src="{{ user.profile.image.url }}">
  </div>

        <h3>{% trans "Set Password" %}</h3>

        <form method="POST" action="." class="password_set">
          {% csrf_token %}
          {% for field in change_password_form.visible_fields %}
          <div>
            {% include "includes/_form_input.html" with form=change_password_form field=field %}
          </div>
          {% endfor %}
            <!-- <fieldset>{{ change_password_form.as_p }}</fieldset> -->
          <div class="mt-4">
            <button name="change_password" class="py-2 px-3 text-sm text-white rounded bg-orange" type="submit">Set Password</button>
          </div>
        </form>

        <h3>{% trans "Update Profile" %}</h3>

        <form method="POST" action="." class="password_set">
            {% csrf_token %}
            <fieldset>{{ profile_form.as_p }}</fieldset>
            <div class="mb-4">
                <button name="update_profile" class="py-2 px-3 text-sm uppercase rounded border border-orange text-orange" type="submit">Update Profile</button>
            </div>
        </form>

        <h3>{% trans "Update Profile Photo" %}</h3>

        {% if user.github_username %}
          <form method="POST" action=".">
            {% csrf_token %}
            <button name="update_github_photo" class="py-2 px-3 text-sm text-white rounded bg-orange" type="submit">Use My GitHub Photo</button>
          </form>
        {% endif %}

        <form method="POST" enctype="multipart/form-data" action=".">
          {% csrf_token %}
          {% for field in profile_photo_form.visible_fields %}
          <div>
            {% include "includes/_form_input.html" with form=profile_photo_form field=field %}
          </div>
          {% endfor %}
          <!-- <fieldset> -->
          <!--       {{ profile_photo_form.as_p }} -->
          <!-- </fieldset> -->
          <div class="mt-4">
              <button name="update_photo" class="py-2 px-3 text-sm text-white rounded bg-orange" type="submit">Upload Profile Photo</button>
          </div>
      </form>

      <hr />
      <h3>{% trans "Update Preferences" %}</h3>

      <form method="POST" action=".">
        {% csrf_token %}
        <p>Notify me via email when:</p>
        {{ profile_preferences_form.errors }}
        {% for field in profile_preferences_form.visible_fields %}
        <div>
          {% include "includes/_form_input.html" with form=profile_preferences_form field=field %}
        </div>
        {% endfor %}
        <!-- <fieldset> -->
        <!--   {{ profile_preferences_form.as_div }} -->
        <!-- </fieldset> -->
        <div class="mt-4">
            <button name="update_preferences" class="py-2 px-3 text-sm text-white rounded bg-orange" type="submit">Update Preferences</button>
        </div>
      </form>
    </div>

    </div>
{% endblock %}
