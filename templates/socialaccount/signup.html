{% extends "base.html" %}

{% load i18n %}

{% block head_title %}{% trans "Signup" %}{% endblock %}

{% block content %}
<div class="my-6 text-center">
  <div class="py-6">
    <h1 class="text-4xl">{% trans "Sign Up" %}</h1>

    <p>{% blocktrans with provider_name=account.get_provider.name site_name=site.name %}You are about to use your {{provider_name}} account to login to
{{site_name}}. As a final step, please complete the following form:{% endblocktrans %}</p>
  </div>

  <form id="signup_form" method="post" action="{% url 'socialaccount_signup' %}" class="w-full md:w-1/2 mx-auto">
    {% csrf_token %}

    {% if form.errors %}
      {% for error in field.errors %}
        <p class="font-bold text-orange">
          {{ error|escape }}
        </p>
      {% endfor %}
    {% endif %}

    <!-- Display non-field errors -->
    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {% for error in form.non_field_errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% endif %}

    {% for field in form.visible_fields %}
      {% if field.errors %}
        {% for error in field.errors %}
          <div class="error-message">{{ error }}</div>
          {% if field.name == "email" and "account already exists with this e-mail" in error %}
            <p><button><a href="{% url 'account_login' %}" class="py-3 px-4 text-white uppercase rounded border border-orange bg-orange">{% trans "Log in" %}</a></button></p>
          {% endif %}
        {% endfor %}
      {% endif %}
      <div>
        {{ field }}
        {% if field.help_text %}
          <small>{{ field.help_text }}</small>
        {% endif %}
      </div>
    {% endfor %}

    {% if redirect_field_value %}
    <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
    {% endif %}
    <button type="submit" class="py-3 px-4 text-white uppercase rounded border border-orange bg-orange">{% trans "Sign Up" %}</button>
  </form>
</div>

{# keep this here for postcss <span class="errorlist"></span> #}

{% endblock %}
